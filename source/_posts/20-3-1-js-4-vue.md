---
title: 19-5-25 js(4) vue
date: 2020-03-02 22:04:54
tags:
- 2020
- js
- vue
---

å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒä¹±ã€‚å†™çš„æ—¶å€™ç¨å¾®æ•´ç†äº†æ•´ç†ï¼Œä½†æ˜¯å†…å®¹ä¸å…¨ã€‚
<!--  more -->
### Vue åŸºç¡€
å‚è€ƒèµ„æ–™ [Vueå®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/v2/guide)<br>
[runoob](https://www.runoob.com/vue2/vue-tutorial.html)
#### åŸºç¡€
æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥å¼•ç”¨å°±è¡Œï¼Œ
```html
<!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
æˆ–è€…ï¼š
<!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<div id="app">
  {{ message }}
</div>
```

éœ€è¦æ³¨æ„çš„æ˜¯jså†…å®¹æ— æ³•é€šè¿‡ç›´æ¥ä½¿ç”¨å¤–éƒ¨å¼•ç”¨æ¥å®Œæˆ
```js
var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!'
  }
})
```
è¿è¡Œä¹‹åï¼Œå¯ä»¥åœ¨æ§åˆ¶å°é‡Œé¢å¯¹app.messageè¿›è¡Œä¿®æ”¹<br>

v-model è¿˜å¯ä»¥åŒå‘ç»‘å®šä¿®æ”¹inputæ¡†ä¸­çš„å†…å®¹ï¼Œpä¸­å†…å®¹ä¹Ÿä¼šæ”¹å˜
```html
<div id="app-6">
  <p>{{ message }}</p>
  <input v-model="message">
</div>
```
```js
var app6 = new Vue({
  el: '#app-6',
  data: {
    message: 'Hello Vue!'
  }
})
```

#### å®ä¾‹
Vueçš„å±æ€§ä¸ç”¨æˆ·å®šä¹‰çš„å†…å®¹æ˜¯åˆ†å¼€æ¥çš„
```js
var data = { a: 1 }
var vm = new Vue({
  el: '#example',
  data: data
})

vm.$data === data // => true
vm.$el === document.getElementById('example') // => true

// $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
vm.$watch('a', function (newValue, oldValue) {
  // è¿™ä¸ªå›è°ƒå°†åœ¨ `vm.a` æ”¹å˜åè°ƒç”¨
})
```

vueå®ä¾‹è¢«åˆ›å»ºçš„æ—¶å€™å¸¦æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥ç”¨createdæ¥æ‰§è¡Œä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºåçš„å‡½æ•°
```js
new Vue({
  data: {
    a: 1
  },
  created: function () {
    // `this` æŒ‡å‘ vm å®ä¾‹
    console.log('a is: ' + this.a)
  }
})
// => "a is: 1"
```
#### æ ·ä¾‹
å¸¸ç”¨æ•°æ®ç»‘å®šå½¢å¼å°±æ˜¯åŒå¤§æ‹¬å·ï¼Œä½†æ˜¯è¿™ç§åªæ˜¯è®²æ–‡æœ¬æ’å…¥ï¼Œå¦‚æœè¦ä½¿ç”¨htmlå°±éœ€è¦ä½¿ç”¨v-html
```html
<span>Message: {{ msg }}</span>
<span v-once> vonceä½¿å¾—æ­¤å¤„å†…å®¹æ’å…¥åä¸èƒ½è¢«ä¿®æ”¹ï¼š{{msg}}</span>
<p>Using v-html directive: <span v-html="rawHtml"></span></p>
```

æ¨¡æ¿æ”¯æŒå•ä¸ªçš„jsè¡¨è¾¾å¼
```html
{{ number + 1 }}

```

åœ¨2.6ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€ä¸ªjsè¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°
```html
<a v-bind:[attributeName]="url"> ... </a>

<a v-on:[eventName]="doSomething"> ... </a>

```

v-bindå’Œv-onéƒ½å¯ä»¥ç¼©å†™
```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-bind:href="url">...</a>
<!-- ç¼©å†™ -->
<a :href="url">...</a>
<!-- å®Œæ•´è¯­æ³• -->
<a v-on:click="doSomething">...</a>
<!-- ç¼©å†™ -->
<a @click="doSomething">...</a>
```

#### è®¡ç®—å±æ€§ computed
å¯ä»¥åœ¨vueçš„å®ä¾‹é‡Œåˆ›å»ºcomputedçš„å±æ€§ã€‚å°½é‡ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæœ‰æ—¶å€™ä¼šå¯¼è‡´thisæŒ‡å‘é”™è¯¯ã€‚
```html
<div id="example">
  <p>Original message: "{{ message }}"</p>
  <p>Computed reversed message: "{{ reversedMessage }}"</p>
</div>

```

```js
var vm = new Vue({
  el: '#example',
  data: {
    message: 'Hello'
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
})
```

#### ä¾¦å¬å±æ€§ watch
æœ‰äº›æ•°æ®ä¼šéšç€å…¶ä»–æ•°æ®å˜åŒ–è€Œå˜åŒ–ï¼Œå› æ­¤å®¹æ˜“æ»¥ç”¨watchï¼Œå»ºè®®ä½¿ç”¨è®¡ç®—å±æ€§ã€‚
```js
<div id="demo">{{ fullName }}</div>

var vm = new Vue({
  el: '#demo',
  data: {
    firstName: 'Foo',
    lastName: 'Bar',
    fullName: 'Foo Bar'
  },
  watch: {
    firstName: function (val) {
      this.fullName = val + ' ' + this.lastName
    },
    lastName: function (val) {
      this.fullName = this.firstName + ' ' + val
    }
  }
})

ä¸Šé¢ä»£ç æ˜¯å‘½ä»¤å¼ä¸”é‡å¤çš„ã€‚å°†å®ƒä¸è®¡ç®—å±æ€§çš„ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒï¼š
var vm = new Vue({
  el: '#demo',
  data: {
    firstName: 'Foo',
    lastName: 'Bar'
  },
  computed: {
    fullName: function () {
      return this.firstName + ' ' + this.lastName
    }
  }
})
```

#### è®¡ç®—å±æ€§çš„setter
```js
computed: {
       fullName: {
           // getter
           get: function () {
               return this.firstName + ' ' + this.lastName
           },
           // setter
           set: function (newValue) {
               var names = newValue.split(' ')
               this.firstName = names[0]
               this.lastName = names[names.length - 1]
           }
       }
   }
```
è¿™æ ·å­å°±èƒ½å¯¹fullnameè¿›è¡Œä¿®æ”¹

#### classä¸styleç»‘å®š
```js
<div
  class="static"
  v-bind:class="{ active: isActive, 'text-danger': hasError }"
></div>

data: {
  isActive: true,
  hasError: false
}
```
å†™æˆè®¡ç®—å±æ€§
```js
<div v-bind:class="classObject"></div>


data: {
  isActive: true,
  error: null
},
computed: {
  classObject: function () {
    return {
      active: this.isActive && !this.error,
      'text-danger': this.error && this.error.type === 'fatal'
    }
  }
}
```
ä¹Ÿå¯ä»¥åº”ç”¨æˆä¸€ä¸ªæ•°ç»„
```html
<div v-bind:class="[activeClass, errorClass]"></div>
```
```js
data: {
  activeClass: 'active',
  errorClass: 'text-danger'
}
```

ç”¨åœ¨ç»„ä»¶ä¸Š
```html
<my-component class="baz boo"></my-component>
<!-- æ¸²æŸ“ç»“æœ-->
<p class="foo bar baz boo">Hi</p>
<!-- bindä¸€æ ·é€‚ç”¨-->
<my-component v-bind:class="{ active: isActive }"></my-component>
```
**è¿™äº›ç»„ä»¶éœ€è¦æ”¾åœ¨vueåˆ›å»ºçš„å†…å®¹ä¸‹**
```js
Vue.component('my-component', {
  template: '<p class="foo bar">Hi</p>'
})
```
ç”¨åœ¨styleä¸Š
```html
<div v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }"></div>
```
```js
data: {
  activeColor: 'red',
  fontSize: 30
}
```
å½“ç„¶ ç›´æ¥ç»‘å®šå¯¹è±¡æ›´å¥½
```html
<div v-bind:style="styleObject"></div>
```
```js
data: {
  styleObject: {
    color: 'red',
    fontSize: '13px'
  }
}
```
#### æ¡ä»¶æ¸²æŸ“ if
æœ‰v-ifè·Ÿv-else
```js
<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
```
v-showå·®ä¸å¤š åŒºåˆ«åœ¨æ¸²æŸ“æ—¶å€™çš„ä¸åŒ

#### åˆ—è¡¨ for
```js
<ul id="example-1">
  <li v-for="item in items">
    {{ item.message }}
  </li>
</ul>

var example1 = new Vue({
  el: '#example-1',
  data: {
    items: [
      { message: 'Foo' },
      { message: 'Bar' }
    ]
  }
})
```

#### ç›‘å¬ on
é™¤äº†ç›‘å¬ç‚¹å‡»ï¼Œè¿˜èƒ½ç›‘å¬é”®ç›˜å†…å®¹
```js
<div id="example-3">
  <button v-on:click="say('hi')">Say hi</button>
  <button v-on:click="say('what')">Say what</button>
</div>

new Vue({
  el: '#example-3',
  methods: {
    say: function (message) {
      alert(message)
    }
  }
})
```


### ç»„ä»¶åŒ– component
vueå¯ä»¥é€šè¿‡å°çš„ç»„ä»¶æ¥å®ç°å¤§çš„åº”ç”¨ï¼Œç»„ä»¶éå¸¸ç±»ä¼¼äºè‡ªå®šä¹‰å…ƒç´ ã€‚<br>
æ ·ä¾‹
```html
<div id="app">
	<div>
	  <input v-model="parentMsg">
	  <br>
	  <child v-bind:message="parentMsg"></child>
	</div>
</div>

<script>
// æ³¨å†Œ
Vue.component('child', {
  // å£°æ˜ props
  props: ['message'],
  // åŒæ ·ä¹Ÿå¯ä»¥åœ¨ vm å®ä¾‹ä¸­åƒ â€œthis.messageâ€ è¿™æ ·ä½¿ç”¨
  template: '<span>{{ message }}</span>'
})
// åˆ›å»ºæ ¹å®ä¾‹
new Vue({
  el: '#app',
  data: {
	parentMsg: 'çˆ¶ç»„ä»¶å†…å®¹'
  }
})
</script>
```


```html
<div id="app-7">
  <ol>
<!--ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ª todo-item æä¾› todo å¯¹è±¡todo å¯¹è±¡æ˜¯å˜é‡ï¼Œå³å…¶å†…å®¹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶æä¾›ä¸€ä¸ªâ€œkeyâ€ï¼Œç¨åå†ä½œè¯¦ç»†è§£é‡Šã€‚-->
    <todo-item
      v-for="item in groceryList"
      v-bind:todo="item"
      v-bind:key="item.id"
    ></todo-item>
  </ol>
</div>
```

```js
//todo-itemæ˜¯åå­—
//props æ˜¯ä¼ é€’
//template æ˜¯å†…å®¹æ ·å¼
Vue.component('todo-item', {
  props: ['todo'],
  template: '<li>{{ todo.text }}</li>'
})

var app7 = new Vue({
  el: '#app-7',
  data: {
    groceryList: [
      { id: 0, text: 'è”¬èœ' },
      { id: 1, text: 'å¥¶é…ª' },
      { id: 2, text: 'éšä¾¿å…¶å®ƒä»€ä¹ˆäººåƒçš„ä¸œè¥¿' }
    ]
  }
})
```

